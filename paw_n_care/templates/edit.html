{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container mx-auto py-10">
    <h1 class="text-2xl font-semibold text-gray-800 mb-6">Edit Appointment</h1>
    <form method="POST" action="{% url 'paw_n_care:edit_appointment' appointment.appointment_id %}">
        {% csrf_token %}

        <!-- Veterinarian Selection -->
        <div class="mb-4">
            <label for="vet" class="block text-sm font-medium text-gray-700">Veterinarian</label>
            <select id="vet" name="vet" class="block w-full mt-1 border-gray-300 rounded-lg shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200">
                <option disabled selected>Select Veterinarian</option>
                {% for vet in vets %}
                    <option value="{{ vet.vet_id }}" {% if appointment.vet and appointment.vet.vet_id == vet.vet_id %}selected{% endif %}>
                        Dr. {{ vet.first_name }} {{ vet.last_name }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <!-- Reason for Appointment -->
        <div class="mb-4">
            <label for="reason" class="block text-sm font-medium text-gray-700">Reason</label>
            <input id="reason" name="reason" type="text" value="{{ appointment.reason }}" 
                   class="block w-full mt-1 border-gray-300 rounded-lg shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200" required>
        </div>

        <!-- Status -->
        <div class="mb-4">
            <label for="status" class="block text-sm font-medium text-gray-700">Status</label>
            <select id="status" name="status" class="block w-full mt-1 border-gray-300 rounded-lg shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200">
                <option disabled>Select Status</option>
                <option value="Scheduled" {% if appointment.status == 'Scheduled' %}selected{% endif %}>Scheduled</option>
                <option value="Completed" {% if appointment.status == 'Completed' %}selected{% endif %}>Completed</option>
                <option value="Cancelled" {% if appointment.status == 'Cancelled' %}selected{% endif %}>Cancelled</option>
            </select>
        </div>

        <!-- Appointment Date -->
        <div class="mb-4">
            <label for="appointment_date" class="block text-sm font-medium text-gray-700">Appointment Date</label>
            <input id="appointment_date" name="appointment_date" type="date" value="{{ appointment.appointment_date|date:'Y-m-d' }}"
                   class="block w-full mt-1 border-gray-300 rounded-lg shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200" required>
        </div>

        <!-- Appointment Time -->
        <div class="mb-4">
            <label for="appointment_time" class="block text-sm font-medium text-gray-700">Appointment Time</label>
            <input id="appointment_time" name="appointment_time" type="time" value="{{ appointment.appointment_time|time:'H:i' }}"
                   class="block w-full mt-1 border-gray-300 rounded-lg shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200" required>
        </div>

        <!-- Submit Button -->
        <div class="mt-6">
            <button type="submit" 
                    class="px-6 py-2 text-white bg-blue-600 rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring focus:ring-blue-200">
                Save Changes
            </button>
            <a href="{% url 'paw_n_care:home' %}" 
               class="ml-4 px-6 py-2 text-blue-600 border border-blue-600 rounded-lg shadow-md hover:bg-blue-100">
                Cancel
            </a>
        </div>
    </form>
</div>
{% endblock %}
